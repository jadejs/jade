<!doctype html><html>
	<head>
		<title>Jade - Template Engine</title>
		<link rel="stylesheet" href="public/stylesheets/style.css" />
	</head>
	<body>
		<div id="container">
			<a href="http://github.com/visionmedia/jade"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 50" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
			<div id="header">
				<h1>Jade</h1>
				<div id="arrow"></div>
				<span id="tagline">Node Template Engine</span>
        <div id="editors">
				  <pre id="jade">
					  <code>
!!! 5
html(lang="en")
  head
    title= "pageTitle"
    script(type="text/javascript")
      if (foo) {
         bar()
      }
  body
    h1 Jade - node template engine
    #container
        p You are amazing

					  </code>
				  </pre>
				  <pre id="html">
					  <code>
  &lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
      &lt;title&gt;Jade&lt;/title&gt;
      &lt;script type=&quot;text/javascript&quot;&gt;
        if (foo) {
        	bar()
        }
      &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1&gt;Jade - node template engine&lt;/h1&gt;
      &lt;div id=&quot;container&quot;&gt;
        &lt;p&gt;You are amazing&lt;/p&gt;
      &lt;/div&gt;
    &lt;/body&gt;
  &lt;/html&gt;					
					  </code>
				  </pre>
        </idv>
			</div>
		</div>
  <script src="https://raw.github.com/visionmedia/jade/master/jade.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script src="public/js/jquery.autogrow.js"></script>
  <script src="public/js/beautify.min.js"></script>
<script type="text/template" id="render_template">
return jade.render(text,{
  locals:{
    title:'Demo title!'
  }
});
</script>
<script>(function(){

function throttle(fn, delay) {  
  var timer = null;  
  return function () {  
    var context = this, args = arguments;  
    clearTimeout(timer);  
    timer = setTimeout(function () {  
      fn.apply(context, args);  
    }, delay);  
  };  
}  

var $render = $('<textarea id="render"></textarea>');
$('#html').after($render);
$render
   .before('<h5><code>function(text){</code></h5>')
   .after('<h5><code>}</code></h5>')
   .val($('#render_template').html())
   .autogrow()

var text = $('#jade').text().replace(/\t/g,'');

var $jade = $('<textarea id="jade"></textarea>');

$('#jade').replaceWith($jade);
$jade.val(text).autogrow();

var $html = $('<textarea id="html"></textarea>');
$('#html').replaceWith($html);
$html.autogrow();

window.jade = require('jade');

var render = throttle(function(){
  var fn = new Function('text',$render.val());
  var html = style_html(fn($jade.val()), {
    'indent_size': 2
   , 'indent_char': ' '
 //, 'max_char': 78
   , 'brace_style': 'collapse'
  });
  $html.val(html).keyup();
  
},300);

$jade.keyup(render);
$render.keyup(render);
//initial render
render();

})()</script>
	</body>
</html>
