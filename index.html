<!doctype html><html>
	<head>
		<title>Jade - Template Engine</title>
		<link rel="stylesheet" href="public/stylesheets/style.css" />
	</head>
	<body>
		<div id="container">
			<a href="http://github.com/visionmedia/jade"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 50" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
			<div id="header">
				<h1>Jade</h1>
				<div id="arrow"></div>
				<span id="tagline">Node Template Engine</span>
				<pre id="jade">
					<code>
<span class="doctype">!!!</span> 5
<span class="tag">html</span>(<span class="key">lang</span>=<span class="val">"en"</span>)
  <span class="tag">head</span>
    <span class="tag">title</span><span class="text">= pageTitle</span>
    <span class="filter">script(type='text/javascript')</span>
      <span class="text">if (foo) {
         bar()
      }</span>
  <span class="tag">body</span>
    <span class="tag">h1</span> <span class="text">Jade - node template engine</span>
    <span class="tag">#container</span>
      - if (youAreUsingJade)
        p <span class="text">You are amazing</span>
      - else
        p <span class="text">Get on it!</span>
					</code>
				</pre>
				<pre id="html">
					<code>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;title&gt;Jade&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
      if (foo) {
      	bar()
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Jade - node template engine&lt;/h1&gt;
    &lt;div id=&quot;container&quot;&gt;
      &lt;p&gt;You are amazing&lt;/p&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;					
					</code>
				</pre>
			</div>
		</div>
  <script src="https://raw.github.com/visionmedia/jade/master/jade.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script src="public/js/jquery.autogrow.js"></script>
  <script src="public/js/beautify.min.js"></script>
<script>(function(){

function throttle(fn, delay) {  
  var timer = null;  
  return function () {  
    var context = this, args = arguments;  
    clearTimeout(timer);  
    timer = setTimeout(function () {  
      fn.apply(context, args);  
    }, delay);  
  };  
}  


var $jade = $('#jade');
var default_text = '/n!!! 5/nhtml(lang="en")/n  head/n    title= "pageTitle"/n    script(type="text/javascript")/n      if (foo) {/n         bar()/n      }/n  body/n    h1 Jade - node template engine/n    #container/n        p You are amazing/n/n'.replace(/\/n/g,'\n');

var $jade_replace = $('<textarea id="jade"></textarea>');
$jade.replaceWith($jade_replace);
$jade_replace.val(default_text || $jade.text().replace(/\t/g,'')).autogrow();

var $html = $('<textarea id="html"></textarea>');
$('#html').replaceWith($html);
$html.autogrow();

var jade = require('jade');

$jade_replace.keyup(throttle(function(){
  console.log($jade_replace.val)
  var html = jade.render($jade_replace.val());
  html = style_html(html, {
    'indent_size': 2
   , 'indent_char': ' '
 //, 'max_char': 78
   , 'brace_style': 'collapse'
  });
  $html.val(html).keyup();
  
},300)).keyup();

})()</script>
	</body>
</html>
